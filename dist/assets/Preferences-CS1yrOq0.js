import{u as e,w as s,j as a,a as t,i as r,k as i,Y as n,Z as c,b as l}from"./ui-vendor-Bw2ZGllB.js";import{r as d,u as o}from"./react-vendor-CMCxm6aa.js";import{c as h,a as m,l as u,f as x,u as p,s as f,B as g,C as v,b as j,d as b,m as y,e as w,L as N}from"./index-GErBfjjf.js";import{S as _,b as k,c as C,d as S,e as z}from"./select-BiKeV8qV.js";import{a as E,S as R}from"./UnifiedNavigation-BDbLMdcf.js";import{S as P,O as q}from"./OnboardingSurveyModal-BM4qFxmX.js";import{A as M}from"./arrow-left-DfyKVgL0.js";import{E as I}from"./loader-circle-2y9w6RF_.js";import{R as F}from"./refresh-cw-B9HwsApH.js";import"./utils-BjC949i_.js";import"./button-D4zDVS4b.js";import"./badge-3VR0oUcD.js";import"./search-iVXSCB_L.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=h("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),D=h("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),L=h("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),O=h("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B="Switch",[H,Y]=t(B),[A,V]=H(B),U=d.forwardRef((t,n)=>{const{__scopeSwitch:c,name:l,checked:o,defaultChecked:h,required:m,disabled:u,value:x="on",onCheckedChange:p,form:f,...g}=t,[v,j]=d.useState(null),b=e(n,e=>j(e)),y=d.useRef(!1),w=!v||(f||!!v.closest("form")),[N=!1,_]=s({prop:o,defaultProp:h,onChange:p});return a.jsxs(A,{scope:c,checked:N,disabled:u,children:[a.jsx(r.button,{type:"button",role:"switch","aria-checked":N,"aria-required":m,"data-state":X(N),"data-disabled":u?"":void 0,disabled:u,value:x,...g,ref:b,onClick:i(t.onClick,e=>{_(e=>!e),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&a.jsx(K,{control:v,bubbles:!y.current,name:l,value:x,checked:N,required:m,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});U.displayName=B;var Z="SwitchThumb",G=d.forwardRef((e,s)=>{const{__scopeSwitch:t,...i}=e,n=V(Z,t);return a.jsx(r.span,{"data-state":X(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})});G.displayName=Z;var K=e=>{const{control:s,checked:t,bubbles:r=!0,...i}=e,l=d.useRef(null),o=n(t),h=c(s);return d.useEffect(()=>{const e=l.current,s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked").set;if(o!==t&&a){const s=new Event("click",{bubbles:r});a.call(e,t),e.dispatchEvent(s)}},[o,t,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:l,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function X(e){return e?"checked":"unchecked"}var W=U,J=G;const Q=d.forwardRef(({className:e,...s},t)=>a.jsx(W,{className:m("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:a.jsx(J,{className:m("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Q.displayName=W.displayName;var $="Checkbox",[ee,se]=t($),[ae,te]=ee($),re=d.forwardRef((t,n)=>{const{__scopeCheckbox:c,name:l,checked:o,defaultChecked:h,required:m,disabled:u,value:x="on",onCheckedChange:p,form:f,...g}=t,[v,j]=d.useState(null),b=e(n,e=>j(e)),y=d.useRef(!1),w=!v||(f||!!v.closest("form")),[N=!1,_]=s({prop:o,defaultProp:h,onChange:p}),k=d.useRef(N);return d.useEffect(()=>{const e=null==v?void 0:v.form;if(e){const s=()=>_(k.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[v,_]),a.jsxs(ae,{scope:c,state:N,disabled:u,children:[a.jsx(r.button,{type:"button",role:"checkbox","aria-checked":le(N)?"mixed":N,"aria-required":m,"data-state":de(N),"data-disabled":u?"":void 0,disabled:u,value:x,...g,ref:b,onKeyDown:i(t.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:i(t.onClick,e=>{_(e=>!!le(e)||!e),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&a.jsx(ce,{control:v,bubbles:!y.current,name:l,value:x,checked:N,required:m,disabled:u,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!le(h)&&h})]})});re.displayName=$;var ie="CheckboxIndicator",ne=d.forwardRef((e,s)=>{const{__scopeCheckbox:t,forceMount:i,...n}=e,c=te(ie,t);return a.jsx(l,{present:i||le(c.state)||!0===c.state,children:a.jsx(r.span,{"data-state":de(c.state),"data-disabled":c.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...e.style}})})});ne.displayName=ie;var ce=e=>{const{control:s,checked:t,bubbles:r=!0,defaultChecked:i,...l}=e,o=d.useRef(null),h=n(t),m=c(s);d.useEffect(()=>{const e=o.current,s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked").set;if(h!==t&&a){const s=new Event("click",{bubbles:r});e.indeterminate=le(t),a.call(e,!le(t)&&t),e.dispatchEvent(s)}},[h,t,r]);const u=d.useRef(!le(t)&&t);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...l,tabIndex:-1,ref:o,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function le(e){return"indeterminate"===e}function de(e){return le(e)?"indeterminate":e?"checked":"unchecked"}var oe=re,he=ne;const me=d.forwardRef(({className:e,...s},t)=>a.jsx(oe,{ref:t,className:m("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(he,{className:m("flex items-center justify-center text-current"),children:a.jsx(u,{className:"h-4 w-4"})})}));me.displayName=oe.displayName;const ue=["CNN","BBC","Reuters","Associated Press","NPR","The Guardian","The New York Times","The Washington Post","Fox News","CNBC"];function xe(){var e;const{user:s}=x(),t=o(),{toast:r}=p(),[i,n]=d.useState({default_reading_level:"base",email_notifications:!0,preferred_news_sources:[],theme:"light",font_size:"medium"}),[c,l]=d.useState(!0),[h,m]=d.useState(!1),[u,B]=d.useState(!1);d.useEffect(()=>{s?H():t("/")},[s,t]);const H=async()=>{try{const{data:e,error:a}=await f.from("user_preferences").select("default_reading_level, email_notifications, preferred_news_sources, theme, font_size, survey_responses, liked_recommendations, onboarding_completed").eq("user_id",s.id).maybeSingle();if(a)return;e?n({default_reading_level:e.default_reading_level||"base",email_notifications:e.email_notifications??!0,preferred_news_sources:e.preferred_news_sources||[],theme:e.theme||"light",font_size:e.font_size||"medium",survey_responses:e.survey_responses,liked_recommendations:e.liked_recommendations||[],onboarding_completed:e.onboarding_completed||!1}):await Y()}catch(e){}finally{l(!1)}},Y=async()=>{try{const{error:e}=await f.from("user_preferences").insert({user_id:s.id,default_reading_level:"base",email_notifications:!0,preferred_news_sources:[],theme:"light",font_size:"medium"})}catch(e){}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:[a.jsx(E,{}),a.jsx("div",{className:"container mx-auto px-4 pt-24 pb-12",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsxs(g,{variant:"outline",size:"sm",onClick:()=>t("/"),className:"flex items-center gap-2 glass-card border-white/10 text-white hover:bg-white/10",children:[a.jsx(M,{className:"h-4 w-4"}),"Back to NewsGlide"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-2",children:[a.jsx(R,{className:"h-8 w-8"}),"Preferences"]}),a.jsx("p",{className:"text-gray-300",children:"Customize your NewsGlide experience"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(v,{className:"glass-card border-white/10",children:[a.jsxs(j,{children:[a.jsxs(b,{className:"flex items-center gap-2 text-white",children:[a.jsx(I,{className:"h-5 w-5"}),"Reading Preferences"]}),a.jsx(y,{className:"text-gray-400",children:"Control how news content is presented to you"})]}),a.jsx(w,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(N,{htmlFor:"reading-level",className:"text-gray-300",children:"Default Reading Level"}),a.jsxs(_,{value:i.default_reading_level,onValueChange:e=>n(s=>({...s,default_reading_level:e})),disabled:c,children:[a.jsx(k,{id:"reading-level",className:"bg-white/10 border-white/10 text-white",children:a.jsx(C,{})}),a.jsxs(S,{className:"bg-gray-900 border-white/10",children:[a.jsx(z,{value:"base",className:"text-white hover:bg-white/10",children:"Standard - Clear and accessible"}),a.jsx(z,{value:"eli5",className:"text-white hover:bg-white/10",children:"Simple - Explain like I'm 5"}),a.jsx(z,{value:"phd",className:"text-white hover:bg-white/10",children:"Academic - Detailed and technical"})]})]})]})})]}),a.jsxs(v,{className:"glass-card border-white/10",children:[a.jsxs(j,{children:[a.jsxs(b,{className:"flex items-center gap-2 text-white",children:[a.jsx(T,{className:"h-5 w-5"}),"Notifications"]}),a.jsx(y,{className:"text-gray-400",children:"Manage your notification preferences"})]}),a.jsx(w,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(N,{htmlFor:"email-notifications",className:"text-gray-300",children:"Email Notifications"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Receive updates about trending topics and saved articles"})]}),a.jsx(Q,{id:"email-notifications",checked:i.email_notifications,onCheckedChange:e=>n(s=>({...s,email_notifications:e})),disabled:c,className:"data-[state=checked]:bg-blue-500"})]})})]}),a.jsxs(v,{className:"glass-card border-white/10",children:[a.jsxs(j,{children:[a.jsxs(b,{className:"flex items-center gap-2 text-white",children:[a.jsx(L,{className:"h-5 w-5"}),"Preferred News Sources"]}),a.jsx(y,{className:"text-gray-400",children:"Select your preferred news outlets for personalized content"})]}),a.jsx(w,{children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:ue.map(e=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(me,{id:e,checked:i.preferred_news_sources.includes(e),onCheckedChange:s=>((e,s)=>{n(a=>({...a,preferred_news_sources:s?[...a.preferred_news_sources,e]:a.preferred_news_sources.filter(s=>s!==e)}))})(e,s),disabled:c,className:"border-white/20 data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),a.jsx(N,{htmlFor:e,className:"text-sm font-medium text-gray-300",children:e})]},e))})})]}),a.jsxs(v,{className:"glass-card border-white/10",children:[a.jsxs(j,{children:[a.jsx(b,{className:"text-white",children:"Display Settings"}),a.jsx(y,{className:"text-gray-400",children:"Customize the appearance of the application"})]}),a.jsxs(w,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(N,{htmlFor:"theme",className:"text-gray-300",children:"Theme"}),a.jsxs(_,{value:i.theme,onValueChange:e=>n(s=>({...s,theme:e})),disabled:c,children:[a.jsx(k,{id:"theme",className:"bg-white/10 border-white/10 text-white",children:a.jsx(C,{})}),a.jsxs(S,{className:"bg-gray-900 border-white/10",children:[a.jsx(z,{value:"light",className:"text-white hover:bg-white/10",children:"Light"}),a.jsx(z,{value:"dark",className:"text-white hover:bg-white/10",children:"Dark"}),a.jsx(z,{value:"auto",className:"text-white hover:bg-white/10",children:"Auto (System)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(N,{htmlFor:"font-size",className:"text-gray-300",children:"Font Size"}),a.jsxs(_,{value:i.font_size,onValueChange:e=>n(s=>({...s,font_size:e})),disabled:c,children:[a.jsx(k,{id:"font-size",className:"bg-white/10 border-white/10 text-white",children:a.jsx(C,{})}),a.jsxs(S,{className:"bg-gray-900 border-white/10",children:[a.jsx(z,{value:"small",className:"text-white hover:bg-white/10",children:"Small"}),a.jsx(z,{value:"medium",className:"text-white hover:bg-white/10",children:"Medium"}),a.jsx(z,{value:"large",className:"text-white hover:bg-white/10",children:"Large"})]})]})]})]})]}),a.jsxs(v,{className:"glass-card border-white/10",children:[a.jsxs(j,{children:[a.jsxs(b,{className:"flex items-center gap-2 text-white",children:[a.jsx(P,{className:"h-5 w-5"}),"Personalization"]}),a.jsx(y,{className:"text-gray-400",children:"Manage your interests and content recommendations"})]}),a.jsxs(w,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-white",children:"Interest Survey"}),a.jsx("p",{className:"text-sm text-gray-400",children:i.onboarding_completed?"You've completed the interest survey":"Help us personalize your news feed"})]}),a.jsxs(g,{variant:"outline",size:"sm",onClick:()=>t("/discover"),className:"flex items-center gap-2 glass-card border-white/10 text-white hover:bg-white/10",children:[a.jsx(F,{className:"h-4 w-4"}),i.onboarding_completed?"Update Survey":"Take Survey"]})]}),i.onboarding_completed&&i.survey_responses&&a.jsxs("div",{className:"space-y-4 p-4 bg-white/5 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-white",children:"Your Survey Responses"}),a.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>B(!0),className:"text-gray-400 hover:text-white hover:bg-white/10",children:[a.jsx(O,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),i.survey_responses.topicInterests&&i.survey_responses.topicInterests.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-400",children:"Topics of Interest"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:i.survey_responses.topicInterests.map((e,s)=>a.jsx(Badge,{variant:"secondary",className:"bg-white/10 text-gray-300",children:e},s))})]}),i.survey_responses.newsConsumption&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-400",children:"Preferred Content Style"}),a.jsx("p",{className:"text-sm text-gray-300",children:i.survey_responses.newsConsumption})]}),i.survey_responses.goals&&i.survey_responses.goals.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-400",children:"How You Use News"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:i.survey_responses.goals.map((e,s)=>a.jsx(Badge,{variant:"secondary",className:"bg-white/10 text-gray-300",children:e},s))})]})]}),i.liked_recommendations&&i.liked_recommendations.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"font-medium flex items-center gap-2 text-white",children:[a.jsx(D,{className:"h-4 w-4 text-red-400"}),"Liked Topics (",i.liked_recommendations.length,")"]}),a.jsx(g,{variant:"ghost",size:"sm",onClick:async()=>{try{await f.from("user_preferences").update({liked_recommendations:[]}).eq("user_id",s.id),n(e=>({...e,liked_recommendations:[]})),r({title:"Cleared liked topics",description:"Your liked recommendations have been cleared.",variant:"success"})}catch(e){r({title:"Error",description:"Failed to clear liked topics.",variant:"destructive"})}},className:"text-gray-400 hover:text-white hover:bg-white/10",children:"Clear All"})]}),a.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:i.liked_recommendations.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded",children:[a.jsx("span",{className:"text-sm text-gray-300 flex-1",children:e}),a.jsx(g,{variant:"ghost",size:"sm",onClick:async()=>{const e=i.liked_recommendations.filter((e,s)=>s!==t);try{await f.from("user_preferences").update({liked_recommendations:e}).eq("user_id",s.id),n(s=>({...s,liked_recommendations:e}))}catch(a){}},className:"text-gray-400 hover:text-white hover:bg-white/10",children:"Remove"})]},t))})]}),i.survey_responses&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-white",children:"Your Interests Profile"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(null==(e=i.survey_responses.fieldOfInterest)?void 0:e.length)>0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Fields:"}),a.jsx("p",{className:"font-medium text-white",children:i.survey_responses.fieldOfInterest.join(", ")})]}),i.survey_responses.role&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Role:"}),a.jsx("p",{className:"font-medium text-white",children:i.survey_responses.role})]}),i.survey_responses.newsConsumption&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Reading Style:"}),a.jsx("p",{className:"font-medium text-white",children:i.survey_responses.newsConsumption})]}),i.survey_responses.updateFrequency&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Update Frequency:"}),a.jsx("p",{className:"font-medium text-white",children:i.survey_responses.updateFrequency})]})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(g,{onClick:async()=>{m(!0);try{const{error:e}=await f.from("user_preferences").update({default_reading_level:i.default_reading_level,email_notifications:i.email_notifications,preferred_news_sources:i.preferred_news_sources,theme:i.theme,font_size:i.font_size}).eq("user_id",s.id);if(e)throw e;r({title:"Preferences saved",description:"Your settings have been updated successfully.",variant:"success"})}catch(e){r({title:"Error",description:"Failed to save preferences. Please try again.",variant:"destructive"})}finally{m(!1)}},disabled:h||c,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:h?"Saving...":"Save Preferences"})})]})]})}),a.jsx(q,{isOpen:u,onClose:()=>B(!1),onComplete:()=>{B(!1),window.location.reload()}})]})}export{xe as default};
