import{c as n,a as D,r as c,j as e,G as d,H as u,J as g,K as o,T as I,f as R,g as k,h as K,B as r,X as W,I as q}from"./index-BFVSuNBS.js";import{B as h}from"./badge-DZaAhHAm.js";import{T as E,F as G,a as Y,G as Q,E as _,u as J,l as O}from"./alert-dialog-Bxq6_kRf.js";import{C as X}from"./loader-circle-DnJb0dIx.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=n("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=n("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=n("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=n("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=n("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=n("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),re=({article:i,onUpdateNotes:j,onUpdateTags:N,showEditableFields:T=!0})=>{const{toast:x}=D(),[H,L]=c.useState("base"),[m,C]=c.useState(i.notes||""),[l,v]=c.useState(i.tags||[]),[p,y]=c.useState(""),[M,b]=c.useState(!1),[S,f]=c.useState(!1),a=i.article_data,P=async()=>{await J(i.id,m)?(j==null||j(m),b(!1),x({title:"Notes Updated",description:"Your notes have been saved successfully."})):x({title:"Error",description:"Failed to update notes. Please try again.",variant:"destructive"})},A=()=>{if(p.trim()&&!l.includes(p.trim())){const s=[...l,p.trim()];v(s),y("")}},V=s=>{const t=l.filter(w=>w!==s);v(t)},F=async()=>{await O(i.id,l)?(N==null||N(l),f(!1),x({title:"Tags Updated",description:"Your tags have been saved successfully."})):x({title:"Error",description:"Failed to update tags. Please try again.",variant:"destructive"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:[e.jsx(u,{children:e.jsxs(g,{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.headline}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:a.confidenceLevel==="High"?"default":"secondary",children:[a.confidenceLevel," Confidence"]}),e.jsxs(h,{variant:a.topicHottness==="High"?"destructive":"outline",className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),a.topicHottness," Interest"]})]})]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-500"}),"Key Points"]}),e.jsx("ul",{className:"space-y-2",children:a.summaryPoints.map((s,t)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),s]},t))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-purple-500"}),"Key Questions"]}),e.jsx("ul",{className:"space-y-2",children:a.keyQuestions.map((s,t)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),s]},t))})]})]})})]}),e.jsxs(I,{value:H,onValueChange:s=>L(s),className:"w-full",children:[e.jsxs(R,{className:"grid w-full grid-cols-3 bg-white/60 backdrop-blur-sm",children:[e.jsx(k,{value:"base",children:"ðŸ“° Essentials"}),e.jsx(k,{value:"eli5",children:"ðŸ§’ ELI5"}),e.jsxs(k,{value:"phd",disabled:!a.article.phd,className:a.article.phd?"":"opacity-50 cursor-not-allowed",children:["ðŸ”¬ PhD ",!a.article.phd&&"(Not available)"]})]}),Object.entries(a.article).map(([s,t])=>t&&e.jsx(K,{value:s,className:"mt-4",children:e.jsx(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:e.jsx(o,{className:"pt-6 max-w-4xl mx-auto",children:e.jsx("div",{className:"prose prose-lg max-w-none",children:t.split(`

`).map((w,B)=>e.jsx("p",{className:"mb-4 leading-relaxed text-gray-800",children:w},B))})})})},s))]}),T&&e.jsxs(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:[e.jsx(u,{children:e.jsxs(g,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Your Notes"]}),!M&&e.jsx(r,{variant:"outline",size:"sm",onClick:()=>b(!0),children:"Edit"})]})}),e.jsx(o,{children:M?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Y,{value:m,onChange:s=>C(s.target.value),placeholder:"Add your notes about this article...",rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:P,size:"sm",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Save Notes"]}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{b(!1),C(i.notes||"")},children:"Cancel"})]})]}):e.jsx("div",{className:"text-gray-600",children:m||e.jsx("span",{className:"italic text-gray-400",children:"No notes added yet. Click Edit to add your thoughts."})})})]}),T&&e.jsxs(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:[e.jsx(u,{children:e.jsxs(g,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Tags"]}),!S&&e.jsx(r,{variant:"outline",size:"sm",onClick:()=>f(!0),children:"Edit"})]})}),e.jsx(o,{children:S?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.map((s,t)=>e.jsxs(h,{variant:"secondary",className:"flex items-center gap-1",children:[s,e.jsx("button",{onClick:()=>V(s),className:"ml-1 hover:text-red-600",children:e.jsx(W,{className:"h-3 w-3"})})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:p,onChange:s=>y(s.target.value),placeholder:"Add a tag...",onKeyPress:s=>s.key==="Enter"&&A()}),e.jsx(r,{onClick:A,size:"sm",children:"Add"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:F,size:"sm",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Save Tags"]}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{f(!1),v(i.tags||[]),y("")},children:"Cancel"})]})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:l.length>0?l.map((s,t)=>e.jsx(h,{variant:"secondary",children:s},t)):e.jsx("span",{className:"italic text-gray-400",children:"No tags added yet. Click Edit to organize this article."})})})]}),e.jsxs(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:[e.jsx(u,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Sources (",a.sources.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"grid gap-4",children:a.sources.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 bg-white/50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:s.outlet}),e.jsx(h,{variant:"outline",children:s.type})]}),e.jsx("p",{className:"text-sm font-medium mb-1",children:s.headline}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:s.analysisNote}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Published: ",new Date(s.publishedAt).toLocaleString()]}),s.url&&e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:text-blue-700 underline flex items-center gap-1",children:["Read original article ",e.jsx(_,{className:"h-3 w-3"})]})]},s.id))})})]})]})};export{te as A,le as F,Z as T,ae as a,ie as b,re as c};
