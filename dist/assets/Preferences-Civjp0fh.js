import{c as V,t as $,r as i,v as G,S as K,j as e,P as I,y as F,U as W,V as U,E as T,x as ce,W as oe,u as le,i as de,a as ue,F as M,B as O,G as S,H as P,J as E,Y as R,K as z,L as N}from"./index-BFVSuNBS.js";import{E as he,S as B,a as D,b as L,d as A,e as j}from"./select-UIomGo4A.js";import{A as fe}from"./arrow-left-M_JDR--f.js";import{S as pe}from"./settings-DYzYyR90.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=V("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);var H="Switch",[ve,Te]=$(H),[ge,be]=ve(H),X=i.forwardRef((t,o)=>{const{__scopeSwitch:r,name:a,checked:l,defaultChecked:n,required:h,disabled:d,value:f="on",onCheckedChange:b,form:m,...g}=t,[u,s]=i.useState(null),c=G(o,C=>s(C)),x=i.useRef(!1),_=u?m||!!u.closest("form"):!0,[v=!1,y]=K({prop:l,defaultProp:n,onChange:b});return e.jsxs(ge,{scope:r,checked:v,disabled:d,children:[e.jsx(I.button,{type:"button",role:"switch","aria-checked":v,"aria-required":h,"data-state":J(v),"data-disabled":d?"":void 0,disabled:d,value:f,...g,ref:c,onClick:F(t.onClick,C=>{y(p=>!p),_&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),_&&e.jsx(je,{control:u,bubbles:!x.current,name:a,value:f,checked:v,required:h,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});X.displayName=H;var Y="SwitchThumb",Z=i.forwardRef((t,o)=>{const{__scopeSwitch:r,...a}=t,l=be(Y,r);return e.jsx(I.span,{"data-state":J(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:o})});Z.displayName=Y;var je=t=>{const{control:o,checked:r,bubbles:a=!0,...l}=t,n=i.useRef(null),h=W(r),d=U(o);return i.useEffect(()=>{const f=n.current,b=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(b,"checked").set;if(h!==r&&g){const u=new Event("click",{bubbles:a});g.call(f,r),f.dispatchEvent(u)}},[h,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:n,style:{...t.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function J(t){return t?"checked":"unchecked"}var Q=X,ke=Z;const ee=i.forwardRef(({className:t,...o},r)=>e.jsx(Q,{className:T("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...o,ref:r,children:e.jsx(ke,{className:T("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ee.displayName=Q.displayName;var q="Checkbox",[_e,Ie]=$(q),[Ce,ye]=_e(q),se=i.forwardRef((t,o)=>{const{__scopeCheckbox:r,name:a,checked:l,defaultChecked:n,required:h,disabled:d,value:f="on",onCheckedChange:b,form:m,...g}=t,[u,s]=i.useState(null),c=G(o,p=>s(p)),x=i.useRef(!1),_=u?m||!!u.closest("form"):!0,[v=!1,y]=K({prop:l,defaultProp:n,onChange:b}),C=i.useRef(v);return i.useEffect(()=>{const p=u==null?void 0:u.form;if(p){const w=()=>y(C.current);return p.addEventListener("reset",w),()=>p.removeEventListener("reset",w)}},[u,y]),e.jsxs(Ce,{scope:r,state:v,disabled:d,children:[e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":k(v)?"mixed":v,"aria-required":h,"data-state":ae(v),"data-disabled":d?"":void 0,disabled:d,value:f,...g,ref:c,onKeyDown:F(t.onKeyDown,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:F(t.onClick,p=>{y(w=>k(w)?!0:!w),_&&(x.current=p.isPropagationStopped(),x.current||p.stopPropagation())})}),_&&e.jsx(we,{control:u,bubbles:!x.current,name:a,value:f,checked:v,required:h,disabled:d,form:m,style:{transform:"translateX(-100%)"},defaultChecked:k(n)?!1:n})]})});se.displayName=q;var te="CheckboxIndicator",re=i.forwardRef((t,o)=>{const{__scopeCheckbox:r,forceMount:a,...l}=t,n=ye(te,r);return e.jsx(ce,{present:a||k(n.state)||n.state===!0,children:e.jsx(I.span,{"data-state":ae(n.state),"data-disabled":n.disabled?"":void 0,...l,ref:o,style:{pointerEvents:"none",...t.style}})})});re.displayName=te;var we=t=>{const{control:o,checked:r,bubbles:a=!0,defaultChecked:l,...n}=t,h=i.useRef(null),d=W(r),f=U(o);i.useEffect(()=>{const m=h.current,g=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(g,"checked").set;if(d!==r&&s){const c=new Event("click",{bubbles:a});m.indeterminate=k(r),s.call(m,k(r)?!1:r),m.dispatchEvent(c)}},[d,r,a]);const b=i.useRef(k(r)?!1:r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,...n,tabIndex:-1,ref:h,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(t){return t==="indeterminate"}function ae(t){return k(t)?"indeterminate":t?"checked":"unchecked"}var ne=se,Ne=re;const ie=i.forwardRef(({className:t,...o},r)=>e.jsx(ne,{ref:r,className:T("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...o,children:e.jsx(Ne,{className:T("flex items-center justify-center text-current"),children:e.jsx(oe,{className:"h-4 w-4"})})}));ie.displayName=ne.displayName;const Se=["CNN","BBC","Reuters","Associated Press","NPR","The Guardian","The New York Times","The Washington Post","Fox News","CNBC"];function Me(){const{user:t}=le(),o=de(),{toast:r}=ue(),[a,l]=i.useState({default_reading_level:"base",email_notifications:!0,preferred_news_sources:[],theme:"light",font_size:"medium"}),[n,h]=i.useState(!0),[d,f]=i.useState(!1);i.useEffect(()=>{if(!t){o("/");return}b()},[t,o]);const b=async()=>{try{const{data:s,error:c}=await M.from("user_preferences").select("default_reading_level, email_notifications, preferred_news_sources, theme, font_size").eq("user_id",t.id).maybeSingle();if(c){console.error("Error fetching preferences:",c);return}s?l({default_reading_level:s.default_reading_level||"base",email_notifications:s.email_notifications??!0,preferred_news_sources:s.preferred_news_sources||[],theme:s.theme||"light",font_size:s.font_size||"medium"}):await m()}catch(s){console.error("Error fetching preferences:",s)}finally{h(!1)}},m=async()=>{try{const{error:s}=await M.from("user_preferences").insert({user_id:t.id,default_reading_level:"base",email_notifications:!0,preferred_news_sources:[],theme:"light",font_size:"medium"});s&&console.error("Error creating default preferences:",s)}catch(s){console.error("Error creating default preferences:",s)}},g=(s,c)=>{l(x=>({...x,preferred_news_sources:c?[...x.preferred_news_sources,s]:x.preferred_news_sources.filter(_=>_!==s)}))},u=async()=>{f(!0);try{const{error:s}=await M.from("user_preferences").update({default_reading_level:a.default_reading_level,email_notifications:a.email_notifications,preferred_news_sources:a.preferred_news_sources,theme:a.theme,font_size:a.font_size}).eq("user_id",t.id);if(s)throw s;r({title:"Preferences saved",description:"Your settings have been updated successfully.",variant:"success"})}catch(s){console.error("Error saving preferences:",s),r({title:"Error",description:"Failed to save preferences. Please try again.",variant:"destructive"})}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>o("/"),className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Back to NewsGlide"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(pe,{className:"h-8 w-8"}),"Preferences"]}),e.jsx("p",{className:"text-gray-600",children:"Customize your NewsGlide experience"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Reading Preferences"]}),e.jsx(R,{children:"Control how news content is presented to you"})]}),e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"reading-level",children:"Default Reading Level"}),e.jsxs(B,{value:a.default_reading_level,onValueChange:s=>l(c=>({...c,default_reading_level:s})),disabled:n,children:[e.jsx(D,{id:"reading-level",children:e.jsx(L,{})}),e.jsxs(A,{children:[e.jsx(j,{value:"base",children:"Standard - Clear and accessible"}),e.jsx(j,{value:"eli5",children:"Simple - Explain like I'm 5"}),e.jsx(j,{value:"phd",children:"Academic - Detailed and technical"})]})]})]})})]}),e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Notifications"]}),e.jsx(R,{children:"Manage your notification preferences"})]}),e.jsx(z,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"email-notifications",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive updates about trending topics and saved articles"})]}),e.jsx(ee,{id:"email-notifications",checked:a.email_notifications,onCheckedChange:s=>l(c=>({...c,email_notifications:s})),disabled:n})]})})]}),e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),"Preferred News Sources"]}),e.jsx(R,{children:"Select your preferred news outlets for personalized content"})]}),e.jsx(z,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Se.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:s,checked:a.preferred_news_sources.includes(s),onCheckedChange:c=>g(s,c),disabled:n}),e.jsx(N,{htmlFor:s,className:"text-sm font-medium",children:s})]},s))})})]}),e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Display Settings"}),e.jsx(R,{children:"Customize the appearance of the application"})]}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"theme",children:"Theme"}),e.jsxs(B,{value:a.theme,onValueChange:s=>l(c=>({...c,theme:s})),disabled:n,children:[e.jsx(D,{id:"theme",children:e.jsx(L,{})}),e.jsxs(A,{children:[e.jsx(j,{value:"light",children:"Light"}),e.jsx(j,{value:"dark",children:"Dark"}),e.jsx(j,{value:"auto",children:"Auto (System)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"font-size",children:"Font Size"}),e.jsxs(B,{value:a.font_size,onValueChange:s=>l(c=>({...c,font_size:s})),disabled:n,children:[e.jsx(D,{id:"font-size",children:e.jsx(L,{})}),e.jsxs(A,{children:[e.jsx(j,{value:"small",children:"Small"}),e.jsx(j,{value:"medium",children:"Medium"}),e.jsx(j,{value:"large",children:"Large"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{onClick:u,disabled:d||n,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:d?"Saving...":"Save Preferences"})})]})]})})})}export{Me as default};
